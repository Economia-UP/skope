name: Run R Scripts Every 5 Minutes

on:
  schedule:
    - cron: '*/5 * * * *'  # This will run the workflow every 5 minutes.
  workflow_dispatch:  # Allow manual triggers as well.

jobs:
  run-r-scripts:
    runs-on: ubuntu-latest

    steps:
      # Step 1: Check out the repository
      - name: Checkout repository
        uses: actions/checkout@v2

      # Step 2: Set up R
      - name: Set up R
        uses: r-lib/actions/setup-r@v2

      # Step 3: Install required R packages
      - name: Install dependencies
        run: |
          Rscript -e "install.packages(c('dplyr', 'ggplot2', 'tidyr'))"  # Modify this with the required packages

      # Step 4: Run R scripts from the 'R' folder
      - name: Run R scripts
        run: |
          for file in R/*.R; do
            # Assuming R scripts save their outputs as CSVs, modify them to save to Out folder
            # If your R scripts already save CSVs, ensure the path is set to Out/
            Rscript $file  # Modify the scripts to save CSV to MX/ folder

            # Example to save outputs from each R script:
            # Rscript $file > MX/$(basename $file .R).csv
          done
